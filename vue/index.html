<!doctype html>
<html lang="en">
	<head>
		
		<meta charset="uft-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<title>Vue</title>
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://chriscohran.com/vue/vue_dev.js"></script>
		
	</head>
	
	<body>
		
		<div id="app">
				<p><input type="text" id="city"> <button v-on:click="getData()">Get Weather</button></p>
<!-- 			<div v-for="udata in userData"> -->
				<p><h2>Weather for {{ weather.name }}</h2></p>
				<p>Overview: {{ weather.weather[0].main }} ({{ weather.weather[0].description }})</p>
				<p>Temperature: {{ Math.round(weather.main.temp) }}&deg;F (High: {{ Math.round(weather.main.temp_max) }}&deg;F | Low: {{ Math.round(weather.main.temp_min) }}&deg;F)</p>
				<p>Humidity: {{ weather.main.humidity }}</p>
				<p>Visibility: {{ metersToFeet(weather.visibility) }} miles</p>
				<p>Wind: {{ Math.round(weather.wind.speed) }} MPH</p>
				<p>Sunrise: {{ epochToLocal(weather.sys.sunrise) }}</p>
				<p>Sunset: {{ epochToLocal(weather.sys.sunset ) }}</p>
<!-- 				Skies: {{ weather.weather[0].main }} ({{ weather.weather[0].description }}) - Temp: {{ weather.main.temp }}&deg;F -->
<!-- 			</div> -->
		</div>
		
		<script>
			
			var url = "https://api.openweathermap.org/data/2.5/weather?q=";
			var city = "Atlanta,GA";
			var key = ",us&units=imperial&appid=756b9824444e5dd7262a7bd801ec80cd";
			
			var app = new Vue({
				el: "#app",
				data: {
					weather: []
				},
				methods: {
					metersToFeet: function(e) {
						return Math.round(e * 0.00062137);
					},
					epochToLocal: function(e) {
						return new Date(e * 1000);
// 						var time = date.match(/(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/);
					},
					getData: function() {
						city = document.getElementById("city").value;
						var self = this
						$.getJSON(url+city+key, function(res) {
							self.weather = res;
						});
					}
				},
				mounted() {
					var self = this
					$.getJSON(url+city+key, function(res) {
						self.weather = res;
					});
				}
			})
			
		</script>
		
	</body>
</html>